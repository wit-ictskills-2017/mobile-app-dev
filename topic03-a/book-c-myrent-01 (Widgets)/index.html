 <!DOCTYPE html>
 <html>
   <head>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

     

     <style>
       

body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}

.ui.segment.pushable
{
  margin: 0;
  padding: 1rem 0;
  overflow: visible;
}



     </style>

   </head>

  <body>
    

<style>
  

code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom:thin solid black;
}

h2
{
  font-size:110%;
  border-bottom: thin solid black;
}

h3
{
  font-size:100%;
  border-bottom: thin solid black;
}

body
{
  overflow-y: scroll;
}

.pushable > .pusher
{
  padding-bottom: 1.5rem;
}

.ui.segment.pushable
{
  margin: 0;
  padding: 1rem 0;
  overflow: visible;
}



</style>

<div class="ui fixed top pointing inverted stackable menu labmenu">
  <header class="header item">
    <i id="toc" class="sitemap icon"></i>
    <a href="../index.html">
      3-a: Navigation & App Structure
    </a>
  </header>
  <div class="right tab-menu menu">
    
    <a class="item" data-tab="MyRent-01 (Widgets)">
      MyRent-01 (Widgets)
    </a>
    
    <a class="item" data-tab="01">
      01
    </a>
    
    <a class="item" data-tab="02">
      02
    </a>
    
    <a class="item" data-tab="03">
      03
    </a>
    
    <a class="item" data-tab="04">
      04
    </a>
    
    <a class="item" data-tab="05">
      05
    </a>
    
    <a class="item" data-tab="06">
      06
    </a>
    
    <a class="item" data-tab="07">
      07
    </a>
    
    <div class="item">
      
    </div>
  </div>
</div>

<div class="ui segment pushable">
  <div class="ui inverted labeled icon left inline vertical sidebar menu">
    
      
        <a class="item" href="../../topic01/book-a-donation-01/index.html">
          Donation-01
        </a>
      
    
      
        <a class="item" href="../../topic02-a/book-a-donation-02/index.html">
          Donation-02
        </a>
      
    
      
        <a class="item" href="../../topic02-b/book-a-donation-03/index.html">
          Donation-03
        </a>
      
    
      
        <a class="item" href="../../topic03-a/book-a-solutions-donation-03/index.html">
          Donation-03-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic03-a/book-b-myrent-00 (Baseline)/index.html">
          MyRent-00 (Baseline)
        </a>
      
    
      
        <a class="item" href="../../topic03-a/book-c-myrent-01 (Widgets)/index.html">
          MyRent-01 (Widgets)
        </a>
      
    
      
        <a class="item" href="../../topic03-b/book-a-myrent-02 (Listview)/index.html">
          MyRent-02 (Listview)
        </a>
      
    
      
        <a class="item" href="../../topic03-b/book-b-event-handling/index.html">
          Event-Handling
        </a>
      
    
      
        <a class="item" href="../../topic04-a/book-a-myrent-03 (Action Bar & Dialogs)/index.html">
          MyRent-03 (Action Bar & Dialogs)
        </a>
      
    
      
        <a class="item" href="../../topic04-a/book-b-myrent-04-fileIO/index.html">
          MyRent-04 (FileIO)
        </a>
      
    
      
        <a class="item" href="../../topic04-b/book-a-myrent-05 (Up Button)/index.html">
          MyRent-05 (Up Button)
        </a>
      
    
      
        <a class="item" href="../../topic04-b/book-b-java-8/index.html">
          Lambda Expressions
        </a>
      
    
      
        <a class="item" href="../../topic04-b/book-c-event-handler-soln/index.html">
          Event-Handling-Solution
        </a>
      
    
      
        <a class="item" href="../../topic05-a/book-a-myrent-06 (Contact & Email)/index.html">
          MyRent-06 (Contact & Email)
        </a>
      
    
      
        <a class="item" href="../../topic05-a/book-b-permissions/index.html">
          MyRent-06a (Permissions)
        </a>
      
    
      
        <a class="item" href="../../topic05-b/book-a-myrent-07 (Fragments)/index.html">
          MyRent-07 (Fragments)
        </a>
      
    
      
        <a class="item" href="../../topic05-b/book-b-twopane/index.html">
          Two Pane
        </a>
      
    
      
        <a class="item" href="../../topic06-a/book-a-myrent-08 (Deletion)/index.html">
          MyRent-08 (Deletion)
        </a>
      
    
      
        <a class="item" href="../../topic06-a/book-b-myrent-09 (Viewpager)/index.html">
          MyRent-09 (ViewPager)
        </a>
      
    
      
        <a class="item" href="../../topic06-b/book-a-settings/index.html">
          MyRent-10 (Settings)
        </a>
      
    
      
        <a class="item" href="../../topic07-a/book-coffeemate-lab-02/index.html">
          Lab-03
        </a>
      
    
      
        <a class="item" href="../../topic07-b/book-coffeemate-lab-03/index.html">
          Lab-04
        </a>
      
    
      
        <a class="item" href="../../topic08-a/book-coffeemate-lab-04/index.html">
          Lab-05
        </a>
      
    
      
        <a class="item" href="../../topic09-a/book-coffeemate-lab-05/index.html">
          Lab-06
        </a>
      
    
      
        <a class="item" href="../../topic09-a/book-coffeemate-lab-06/index.html">
          Lab-07
        </a>
      
    
      
        <a class="item" href="../../topic10-a/book-coffeemate-lab-07/index.html">
          Lab-08
        </a>
      
    
      
        <a class="item" href="../../topic11/book-android-client/index.html">
          Lab-Android 2
        </a>
      
    
      
        <a class="item" href="../../topic12/book-secure-android/index.html">
          Lab-Android 3
        </a>
      
    
  </div>
  <div class="pusher" tabindex="-1">
    <div class="ui basic segment" id="labchat">
      <br>
      
      <div  class="ui tab segment lab" data-tab="MyRent-01 (Widgets)">
        <h1>Objectives</h1>
<p>In this version of MyRent, we introduce a range of UI Widgets to evolve the UX into something more useful. These widgets will be &#39;active&#39;, meaning that the host Activity will be intercepting and responding to events the user may generate when interacting with the application.</p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="01">
        <h1>Preview</h1>
<p>At the end of this topic our goal is to have a screen looking something like this:</p>
<p><img src="img/01.png" alt=""></p>
<p>We will have added: </p>
<ul>
<li>Section titles (i.e. LOCATION, STATUS).</li>
<li>Button indicating the residence registration date.</li>
<li>Checkbox: a tick indicating if the residence is rented.</li>
</ul>
<p>In the previous lab we introduced a listener for the geolocation input (the latitude-longitude string).</p>
<p>In this lab we shall:</p>
<ul>
<li>Add functionality to the Residence model, namely:<ul>
<li>A Date field to indicate when the residence was registered with the MyRent app.<ul>
<li>This shall be instantiated in the Residence constructor.</li>
</ul>
</li>
<li>A boolean to indicate the rented status of the residence, that is whether or not the residence has a tenant.</li>
<li>We shall introduce a method to return a suitably formatted version of the Date object in the form of a string.<ul>
<li>This shall be used as the button label in the STATUS section.</li>
</ul>
</li>
<li>Setters and getters for the <em>rented</em> boolean.</li>
</ul>
</li>
</ul>

      </div>
     
      <div  class="ui tab segment lab" data-tab="02">
        <h1>Restructure MyRent</h1>
<p>Continue building the MyRent app that you commenced in the previous lab.</p>
<p>Before we start to expand the project, we need to perform some rearranging so it can be extended in an orderly manner.</p>
<p>This is our current application workspace:</p>
<p><img src="img/24.png" alt="Figure 1: Existing structure"></p>
<p>.. and this is a version we used in writing this lab:</p>
<p><img src="img/25.png" alt="Figure 2: Structure following refactoring"></p>
<p>Here is a detailed description on how this may be achieved:</p>
<ul>
<li><p>Select gear icon and untick <em>Compact Empty Middle Packages</em>. Observe the change to the package layout.<br><img src="img/25a.png" alt="Figure 3: Expand empty middle packages"></p>
</li>
<li><p>Select the <em>myrent</em> package and create a package named <em>activities</em> within <em>org.wit.myrent</em>.
<img src="img/25c.png" alt="Figure 4: Creating new package">
<img src="img/25d.png" alt="Figure 5: New package org.wit.myrent.activities"></p>
</li>
<li><p>Drag and drop MyRentActivity into this new package.</p>
</li>
<li><p>Create a package named <em>models</em> within <em>org.wit.myrent</em>.</p>
</li>
<li><p>Drag and drop Residence into this new package. 
<img src="img/25e.png" alt="Figure 6: Refactored layout  "></p>
</li>
<li><p>Ensure that when the refactoring is complete you tick this menu item again resulting in the required layout as shown in Figure 2 above and again here in Figure 7.
<img src="img/25f.png" alt="Figure 7: Structure following refactoring"></p>
</li>
</ul>

      </div>
     
      <div  class="ui tab segment lab" data-tab="03">
        <h1>Layout</h1>
<p>Before proceeding, use the menu refactor command to rename MyRentActivity to ResidenceAcivity.</p>
<ul>
<li>This change is being made to provide naming consistency with future classes that we shall be developing.</li>
</ul>
<p>The previous iteration has one UI control, an EditText.</p>
<p>This iteration shall introduce:</p>
<ul>
<li>2 section labels (LOCATION &amp; STATUS).</li>
<li>A button that will have a label representing the residence registration date and that will be added at runtime.</li>
<li>A checkbox which when ticked indicates that the residence has a tenant.</li>
</ul>
<p><strong>Button</strong></p>
<p>Select <em>activity_myrent.xml</em>, right click and using context menu commands <em>Refactor | Rename</em> change the name to <em>activity_residence.xml</em>.</p>
<p>Open <em>activity_residence.xml</em>.</p>
<p>Remove background, text and hint colouring (if not already done). This was introduced simply to demonstrate how it might be achieved. The refactored file is as follows:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;org.wit.myrent.activities.ResidenceAcivity&quot;&gt;

    &lt;EditText
        android:id=&quot;@+id/geolocation&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginLeft=&quot;8dp&quot;
        android:layout_marginRight=&quot;8dp&quot;
        android:layout_marginTop=&quot;16dp&quot;
        android:hint=&quot;@string/geolocation_hint&quot;
        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;
        app:layout_constraintRight_toRightOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginEnd=&quot;8dp&quot; /&gt;

&lt;/android.support.constraint.ConstraintLayout&gt;</code></pre>
<p>A number of different approaches are available to change the layout. </p>
<ul>
<li>Here we shall use a both the Design view (graphical) and Text View (XML).</li>
</ul>
<p>In Design View, drag a Button onto the MyRent canvas.  Rezise, position and rename it as shown in Figure 1.</p>
<p><img src="img/05.png" alt="Figure 1: Drag and drop button onto MyRent canvas and manually reformat"></p>
<p>Change the left and right margins for the <strong>geolocation</strong> EditText field to be 16dp also. </p>
<p>You can see in Figure 1, that the text on the Button is <strong><em>Button</em></strong>.  We want to replace this with a string resource called &quot;registration_date&quot;, whose value is currently the empty string (&quot;&quot;).</p>
<p><img src="img/05a.png" alt="Figure 2: Removing hardwired strings"></p>
<p>Here is the resulting <em>strings.xml</em> file:</p>
<pre><code>&lt;resources&gt;
    &lt;string name=&quot;app_name&quot;&gt;MyRent&lt;/string&gt;
    &lt;string name=&quot;hello_world&quot;&gt;Hello World!&lt;/string&gt;
    &lt;string name=&quot;geolocation_hint&quot;&gt;52.253456,-7.187162&lt;/string&gt;
    &lt;string name=&quot;registration_date&quot; /&gt;
&lt;/resources&gt;</code></pre>
<p>Open <em>activity_residence.xml</em> in Text mode.  Your XML should look something like this:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;org.wit.myrent.activities.ResidenceAcivity&quot;&gt;

    &lt;EditText
        android:id=&quot;@+id/geolocation&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginLeft=&quot;16dp&quot;
        android:layout_marginRight=&quot;16dp&quot;
        android:layout_marginTop=&quot;16dp&quot;
        android:hint=&quot;@string/geolocation_hint&quot;
        app:layout_constraintHorizontal_bias=&quot;0.0&quot;
        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;
        app:layout_constraintRight_toRightOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/registration_date&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginLeft=&quot;16dp&quot;
        android:layout_marginRight=&quot;16dp&quot;
        android:layout_marginTop=&quot;16dp&quot;
        android:text=&quot;@string/registration_date&quot;
        app:layout_constraintHorizontal_bias=&quot;0.0&quot;
        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;
        app:layout_constraintRight_toRightOf=&quot;parent&quot;
        app:layout_constraintTop_toBottomOf=&quot;@+id/geolocation&quot; /&gt;

&lt;/android.support.constraint.ConstraintLayout&gt;</code></pre>
<p>When run, your activity should look like this:
<img src="img/05b.png" alt="Figure 3: Layout of EditText and Button"></p>
<p>We want to change to LinearLayout, so return to acivity_residence.xml and manually refactor your ConstraintLayout to be a LinearLayout:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:layout_marginLeft=&quot;16dp&quot;
    android:layout_marginRight=&quot;16dp&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;EditText
        android:id=&quot;@+id/geolocation&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:hint=&quot;@string/geolocation_hint&quot;/&gt;

    &lt;Button
        android:id=&quot;@+id/registration_date&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;/&gt;

&lt;/LinearLayout&gt;</code></pre>
<p>Observe that a button id has now been generated in the <em>R.java</em> file:</p>
<p><img src="img/09.png" alt="Figure 4: R File"></p>
<p>Next we shall add a section label and divider immediately before the geolocation node.</p>
<ul>
<li>Use the graphical editor and drag a TextView element into position.</li>
<li><p>Then inspect the code in the xml editor.</p>
<ul>
<li>Ensure the width is set to match parent.</li>
<li>Change the default android:text to @string/location.  Use ALT+Enter to set the string resource value to Location.</li>
<li>Style the TextView with a list separator.<ul>
<li>Use <a href="http://developer.android.com/reference/android/R.attr.html">R.attr.listSeparatorTextViewStyle</a>.</li>
</ul>
</li>
</ul>
</li>
<li><p>In res/values/string.xml, the following string resource should have been added:</p>
</li>
</ul>
<pre><code>    &lt;string name=&quot;location&quot;&gt;Location&lt;/string&gt;</code></pre>
<p>Here is the completed xml node for the location label:</p>
<pre><code>    &lt;TextView
        android:id=&quot;@+id/locationLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/location&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;</code></pre>
<p>Implement these modifications and inspect the result in the Graphical Layout. You should be presented with that shown in Figure 5:</p>
<p><img src="img/08.png" alt="Figure 5: List separator added"></p>
<p>Finally, in this step, add a section label for status. </p>
<p>Here is the xml:</p>
<pre><code>    &lt;TextView
        android:id=&quot;@+id/statusLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/status&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;</code></pre>
<p>Add the referenced string resource <em>status</em> in <em>res/values/strings.xml</em>:</p>
<pre><code>    &lt;string name=&quot;status&quot;&gt;Status&lt;/string&gt;</code></pre>
<p>The result is shown in Figure 6.</p>
<p><img src="img/10.png" alt="Figure 6: Status section label and separator added"></p>
<p>We shall continue with the development of the layout in the following steps.</p>
<p>Here is the refactored <em>activity_residence</em> layout:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:layout_marginLeft=&quot;16dp&quot;
    android:layout_marginRight=&quot;16dp&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;TextView
        android:id=&quot;@+id/locationLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/location&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

    &lt;EditText
        android:id=&quot;@+id/geolocation&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:hint=&quot;@string/geolocation_hint&quot;/&gt;

    &lt;TextView
        android:id=&quot;@+id/statusLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/status&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

    &lt;Button
        android:id=&quot;@+id/registration_date&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;/&gt;

&lt;/LinearLayout&gt;</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="04">
        <h1>Add Widgets</h1>
<p>We shall now complete remaining work on the layout using the Graphical Layout and the Outline panel.</p>
<p>Here is the the layout at this stage of development.  Note that we added some comments and requested focus for the geolocation field:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:layout_marginLeft=&quot;16dp&quot;
    android:layout_marginRight=&quot;16dp&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;!-- LOCATION SEPARATOR --&gt;
    &lt;TextView
        android:id=&quot;@+id/locationLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/location&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

    &lt;!-- Geolocation (GPS Coords) --&gt;
    &lt;EditText
        android:id=&quot;@+id/geolocation&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:hint=&quot;@string/geolocation_hint&quot;&gt;
        &lt;requestFocus/&gt;
    &lt;/EditText&gt;

    &lt;!-- STATUS SEPARATOR--&gt;
    &lt;TextView
        android:id=&quot;@+id/statusLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/status&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

    &lt;Button
        android:id=&quot;@+id/registration_date&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;/&gt;

&lt;/LinearLayout&gt;</code></pre>
<p>It remains only to add the checkbox.</p>
<p>With the Graphical Layout open, drag a CheckBox from the Widgets pane and drop directly underneath the <em>registration_date</em> button.</p>
<p><img src="img/22.png" alt="Figure 1: Drag and drop CheckBox widget directly underneath registration_date button"></p>
<p>Replace android:text attribute with a string, isrented, referenced in strings.xml and change the android:id, all as shown here:</p>
<pre><code>    &lt;CheckBox
        android:id=&quot;@+id/isrented&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/isrented&quot;
        android:checked=&quot;false&quot;/&gt;</code></pre>
<p>Add a string resource for the checkbox:</p>
<pre><code>  &lt;string name=&quot;isrented&quot;&gt;Rented?&lt;/string&gt;</code></pre>
<p>Because we have moved ResidenceActivity to a new folder, check the manifest file to make sure it was updated (it should have been during the refactoring process):</p>
<pre><code>        &lt;activity android:name=&quot;.activities.ResidenceAcivity&quot;&gt;</code></pre>
<ul>
<li>The layout so far, is shown in Figure 2:</li>
</ul>
<p><img src="img/23.png" alt="Figure 2: Layout so far"></p>
<p>The hierarchical arrangement of the layout is shown here in Figure 3.</p>
<ul>
<li>Notice that the LinearLayout orientation is vertical thus creating a stack of xml nodes comprising the various UI widgets.</li>
</ul>
<p><img src="img/13.png" alt="Figure 3: Hierarchical arrangement of UI components"></p>
<p>You will notice that the margins are &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</p>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

<pre><code>&lt;!-- LOCATION SEPARATOR --&gt;
&lt;TextView
    android:id=&quot;@+id/locationLabel&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;@string/location&quot;
    style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

&lt;!-- Geolocation (GPS Coords) --&gt;
&lt;EditText
    android:id=&quot;@+id/geolocation&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:layout_marginLeft=&quot;16dp&quot;
    android:layout_marginRight=&quot;16dp&quot;
    android:hint=&quot;@string/geolocation_hint&quot;&gt;
    &lt;requestFocus/&gt;
&lt;/EditText&gt;

&lt;!-- STATUS SEPARATOR--&gt;
&lt;TextView
    android:id=&quot;@+id/statusLabel&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;@string/status&quot;
    style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

&lt;Button
    android:id=&quot;@+id/registration_date&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:layout_marginLeft=&quot;16dp&quot;
    android:layout_marginRight=&quot;16dp&quot;/&gt;

&lt;CheckBox
    android:id=&quot;@+id/isrented&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;@string/isrented&quot;
    android:layout_marginLeft=&quot;16dp&quot;
    android:layout_marginRight=&quot;16dp&quot;
    android:checked=&quot;false&quot;/&gt;</code></pre>
<p></LinearLayout>
slightly differnt in the above screen shot.  Move the setting of the margins from the overall LinearLayout and into the EditText, Button and CheckBox widgets only.  Note the changes to the output.</p>
<p><img src="img/23b.png" alt="Figure 4: Layout completed"></p>
<p>And the completed XML:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;!-- LOCATION SEPARATOR --&gt;
    &lt;TextView
        android:id=&quot;@+id/locationLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/location&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

    &lt;!-- Geolocation (GPS Coords) --&gt;
    &lt;EditText
        android:id=&quot;@+id/geolocation&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginLeft=&quot;16dp&quot;
        android:layout_marginRight=&quot;16dp&quot;
        android:hint=&quot;@string/geolocation_hint&quot;&gt;
        &lt;requestFocus/&gt;
    &lt;/EditText&gt;

    &lt;!-- STATUS SEPARATOR--&gt;
    &lt;TextView
        android:id=&quot;@+id/statusLabel&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/status&quot;
        style=&quot;?android:listSeparatorTextViewStyle&quot;/&gt;

    &lt;Button
        android:id=&quot;@+id/registration_date&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginLeft=&quot;16dp&quot;
        android:layout_marginRight=&quot;16dp&quot;/&gt;

    &lt;CheckBox
        android:id=&quot;@+id/isrented&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/isrented&quot;
        android:layout_marginLeft=&quot;16dp&quot;
        android:layout_marginRight=&quot;16dp&quot;
        android:checked=&quot;false&quot;/&gt;

&lt;/LinearLayout&gt;</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="05">
        <h1>Activity &amp; Model Updates</h1>
<p>Replace your Residence class with the following:</p>
<pre><code>package org.wit.myrent.models;

import java.util.Date;
import java.util.Random;

public class Residence
{
  public Long id;
  public Long date;

  //a latitude longitude pair
  //example &quot;52.4566,-6.5444&quot;
  private String geolocation;
  public boolean rented;

  public Residence()
  {
    id = unsignedLong();
    date = new Date().getTime();
  }

  /**
   * Generate a long greater than zero
   * @return Unsigned Long value greater than zero
   */
  private Long unsignedLong() {
    long rndVal = 0;
    do {
      rndVal = new Random().nextLong();
    } while (rndVal &lt;= 0);
    return rndVal;
  }

  public void setGeolocation(String geolocation)
  {
    this.geolocation = geolocation;
  }

  public String getGeolocation()
  {
    return geolocation;
  }

  public String getDateString() {
    return &quot;Registered:&quot; + dateString();
  }

  private String dateString() {
    String dateFormat = &quot;EEE d MMM yyyy H:mm&quot;;
    return android.text.format.DateFormat.format(dateFormat, date).toString();
  }

}</code></pre>
<p>Note that we have made the fields public for convenience. Also, we have introduced a new date and rented fields into the model.</p>
<p>In the ResidenceActivity class, introduce 2 new fields to access the new widgets we have just introduced:</p>
<pre><code>  private CheckBox rented;
  private Button   dateButton;</code></pre>
<p>and on OnCreate, we need to initialize these:</p>
<pre><code>    dateButton  = (Button) findViewById(R.id.registration_date);
    rented      = (CheckBox) findViewById(R.id.isrented);
    rented.setOnCheckedChangeListener(this);</code></pre>
<p>Furthmore, we are going to disable the date button when the activity is created:</p>
<pre><code>    dateButton.setEnabled(false);</code></pre>
<p>We would now like to engage the checkbox rented. First, implement the OnCheckedChangeListener interface:</p>
<pre><code>public class ResidenceActivity extends Activity implements TextWatcher, OnCheckedChangeListener
{</code></pre>
<p>This will require the following import:</p>
<pre><code>import android.widget.CompoundButton.OnCheckedChangeListener;</code></pre>
<p>and this is the implementation:</p>
<pre><code>  @Override
  public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {
        Log.i(this.getClass().getSimpleName(), &quot;rented Checked&quot;);
        residence.rented = isChecked;
    }</code></pre>
<p>Run the app and test the check button to ensure that the message, rented Checked, is logged when you check and uncheck the box.</p>
<p>This completes the class. Here is the complete code to this stage:</p>
<pre><code>package org.wit.myrent.activities;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.EditText;

import org.wit.myrent.R;
import org.wit.myrent.models.Residence;


public class ResidenceActivity extends AppCompatActivity implements TextWatcher, OnCheckedChangeListener{

    private EditText geolocation;
    private Residence residence;
    private CheckBox rented;
    private Button dateButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_residence);

        geolocation = (EditText) findViewById(R.id.geolocation);
        residence   = new Residence();
        geolocation.addTextChangedListener(this);

        dateButton  = (Button)   findViewById(R.id.registration_date);
        dateButton.setEnabled(false);

        rented = (CheckBox) findViewById(R.id.isrented);
        rented.setOnCheckedChangeListener(this);

    }

    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    }

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    }

    @Override
    public void afterTextChanged(Editable editable) {
        residence.setGeolocation(editable.toString());
    }

    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {
        Log.i(this.getClass().getSimpleName(), &quot;rented Checked&quot;);
        residence.rented = isChecked;
    }
}</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="06">
        <h1>Test</h1>
<p>Run the app and check that the layout presented is as expected, something like that shown in Figure 1.</p>
<p><img src="img/01.png" alt="Figure 1: MyRent"></p>
<p>Run the app and use the debugger to ensure data is being transmitted to and from the Residence object.</p>
<ul>
<li>Run MyRent app on an emulator.</li>
<li>Place a breakpoint at ResidenceActivity.afterTextChanged as shown in Figure 2.</li>
<li>Tick the Rented? checkbox.</li>
<li>Input a number in the Location input field.<ul>
<li>The program should halt at the breakpoint.</li>
</ul>
</li>
</ul>
<p>Examine the state of the variables such as:</p>
<ul>
<li>this</li>
<li>editable</li>
<li>residence.date</li>
<li>residence.geolocation</li>
<li>residence.id</li>
<li>residence.rented</li>
</ul>
<p>Press the Run to Cursor toolbar icon to run to completion.</p>
<p><img src="img/21.png" alt="Figure 2: Using debugger to verify data input transmitted to model object"></p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="07">
        <h1>Summary</h1>
<p>Here is what we have achieved in this topic:</p>
<ul>
<li>Explored various ways of modifying layout working with the Graphical Layout editor, the XML editor and the Outline view.</li>
<li><p>Added widgets to the layout</p>
<ul>
<li>Section labels and dividers</li>
<li>A button to display the date the property was registered</li>
<li>A checkbox to indicate whether or not the residence is rented.</li>
</ul>
</li>
<li><p>Added a listener in the controller to detected changes in the UI checkbox state and transmit any state changes to the model Residence object</p>
</li>
<li><p>Added a date field to the model and intialized this at the time a residence object created which represents the registration date of the property with the MyRent app.</p>
</li>
<li><p>Described how to conduct a simple test using the debugger to verify that the listeners operate correctly and that UI data transmission takes place successfully in both directions between model and UI.</p>
</li>
</ul>
<p>The application at the end of this lab is available for  download from GitHub: <a href="https://github.com/wit-ictskills-2017/android-myrent-2017.git">android-myrent-2017</a></p>
<p>Select Releases, followed by V1.0.</p>

      </div>
     
    </div>
  </div>
</div>
<!--<div class="ui bottom fixed borderless right menu">
  <div class="ui right tiny menu">
    <div class="ui mini message segment">
      .
      <a href="http://creativecommons.org/licenses/by-nc/4.0/"
         title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
         target="_blank">Creative Commons License
      </a>
    </div>
  </div>
</div>-->

<script>
  $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

</script>



    <footer>

    </footer>
    <script>
      $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

    </script>
  </body>

 </html>